---
layout: single
title: "Testbenchì—ì„œì˜ Race Condition"
categories: verilog
---

# Testbenchì—ì„œì˜ Race Condition

[ì´ì „ ê¸€](/verilog/rtl-simulator1)ì—ì„œëŠ” Delta Cycleì˜ ê°œë…ê³¼ RTL ì„¤ê³„ ì‹œ blocking/non-blockingì„ êµ¬ë¶„í•´ì•¼ í•˜ëŠ” ì´ìœ ë¥¼ ë‹¤ë¤˜ìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” **Testbench ì‘ì„± ì‹œ ë°œìƒí•˜ëŠ” Race Condition**ì— ëŒ€í•´ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.

RTL ì„¤ê³„ë¥¼ ì™„ë²½í•˜ê²Œ í–ˆë”ë¼ë„, testbenchì—ì„œ ì‹ í˜¸ë¥¼ ì˜ëª»ëœ ë°©ì‹ìœ¼ë¡œ driveí•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ë¥¼ ì–»ê²Œ ë©ë‹ˆë‹¤. ì´ ê¸€ì„ í†µí•´ ì™œ ê·¸ëŸ° ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ì§€, ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

---

### Case 1A: Blocking Assignment (Race Condition)

![Case 1A Waveform](/assets/images/2026-01-24-rtl-simulator2/case1a_waveform.png)

#### í•µì‹¬ ê´€ì°° ì‚¬í•­:

1. **Race Condition ë°œìƒ**: Testbenchì—ì„œ blocking assignment (`=`)ë¥¼ ì‚¬ìš©í•˜ë©´ Active Regionì—ì„œ ì¦‰ì‹œ ì‹¤í–‰ë˜ì–´ DUTì™€ race conditionì´ ë°œìƒí•©ë‹ˆë‹¤.

2. **ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ë™ì‘**: TBì™€ DUTê°€ ëª¨ë‘ ê°™ì€ í´ëŸ­ ì—£ì§€ì˜ Active Regionì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ, ì‹¤í–‰ ìˆœì„œëŠ” **IEEE 1364 í‘œì¤€ì—ì„œ ì •ì˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (undefined)**.

3. **Simulator ì˜ì¡´ì„±**: ì‹¤ì œ ë™ì‘ì€ simulatorê°€ ì–´ë–¤ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„ íƒí•˜ëŠëƒì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤. ì„œë¡œ ë‹¤ë¥¸ simulator(Vivado, ModelSim, Icarus) ë˜ëŠ” ë‹¤ë¥¸ ë²„ì „ì—ì„œ ë‹¤ë¥¸ ê²°ê³¼ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### Delta Cycle ë¶„ì„ (T=30ns, reset ì´í›„ ì²« ë°ì´í„°):

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         TIME T=30ns: posedge clk occurs
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTIVE REGION                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ Both blocks are triggered and ready to execute:                             â”‚
â”‚                                                                             â”‚
â”‚   TB initial block              DUT always block                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚   @(posedge clk);               always @(posedge clk)                       â”‚
â”‚   i_valid_tb = 1'b1;  â†â”€?â”€â†’     r_valid[0] <= i_valid;                      â”‚
â”‚   i_data_tb = 0x02;             r_power_of_2 <= i_data * i_data;            â”‚
â”‚                                                                             â”‚
â”‚ âš ï¸  Which block executes first? â†’ UNDEFINED by IEEE standard!               â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SCENARIO A: TB executes first                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Step 1: TB runs                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb = 1'b1;  â†’ i_valid changes 0â†’1 IMMEDIATELY        â”‚          â”‚
â”‚   â”‚ i_data_tb = 0x02;   â†’ i_data changes 0â†’2 IMMEDIATELY         â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Step 2: DUT runs (after TB finished)                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] <= i_valid;  â†’ read i_valid (sees 1'b1 - NEW!)    â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_valid[0] = 1  â”‚          â”‚
â”‚   â”‚ r_power_of_2 <= 2*2;    â†’ read i_data (sees 0x02 - NEW!)     â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_power_of_2 = 4â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Result: DUT captures NEW values at SAME clock edge (no delay!)            â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SCENARIO B: DUT executes first                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Step 1: DUT runs                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] <= i_valid;  â†’ read i_valid (sees 1'b0 - OLD!)    â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_valid[0] = 0  â”‚          â”‚
â”‚   â”‚ r_power_of_2 <= 0*0;    â†’ read i_data (sees 0x00 - OLD!)     â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_power_of_2 = 0â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Step 2: TB runs (after DUT finished)                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb = 1'b1;  â†’ i_valid changes 0â†’1                    â”‚
â”‚   â”‚ i_data_tb = 0x02;   â†’ i_data changes 0â†’2                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Result: DUT captures OLD values, sees NEW at NEXT clock edge              â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš¨ THIS IS THE RACE CONDITION!                                              â”‚
â”‚    Same code, same time T=30ns, but different results depending on          â”‚
â”‚    which block the simulator chooses to run first!                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NBA REGION (after Active region completes)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   All scheduled non-blocking updates execute now:                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] â† ???    (1 if Scenario A, 0 if Scenario B)       â”‚          â”‚
â”‚   â”‚ r_power_of_2 â† ???  (4 if Scenario A, 0 if Scenario B)       â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì‹œë‚˜ë¦¬ì˜¤ ë¹„êµ:

| í•­ëª© | Scenario A (TB ë¨¼ì €) | Scenario B (DUT ë¨¼ì €) |
|--------|----------------------|------------------------|
| **DUTê°€ ì½ì„ ë•Œ i_valid** | 1 (NEW) | 0 (OLD) |
| **DUTê°€ ì½ì„ ë•Œ i_data** | 0x02 (NEW) | 0x00 (OLD) |
| **NBA ì´í›„ r_valid[0]** | 1 | 0 |
| **NBA ì´í›„ r_power_of_2** | 4 | 0 |
| **ì²« ìœ íš¨ ì¶œë ¥** | T=30ns | T=40ns |

### Case 1B: Non-blocking Assignment (Race ì—†ìŒ)

![Case 1B Waveform](/assets/images/2026-01-24-rtl-simulator2/case1b_waveform.png)

#### í•µì‹¬ ê´€ì°° ì‚¬í•­:

1. **Race Condition ì—†ìŒ**: Testbenchì—ì„œ non-blocking assignment (`<=`)ë¥¼ ì‚¬ìš©í•˜ë©´ ì—…ë°ì´íŠ¸ê°€ NBA Regionì— ì˜ˆì•½ë˜ì–´ race conditionì„ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. **ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë™ì‘**: ì½ê¸°ì™€ ì“°ê¸°ê°€ ì„œë¡œ ë‹¤ë¥¸ regionì—ì„œ ë°œìƒí•˜ë¯€ë¡œ ì‹¤í–‰ ìˆœì„œê°€ **ëª…í™•í•˜ê²Œ ì •ì˜**ë©ë‹ˆë‹¤.

3. **1 í´ëŸ­ ì‚¬ì´í´ ì§€ì—°**: ì…ë ¥ ë³€ê²½ì€ **ë‹¤ìŒ í´ëŸ­ ì—£ì§€**ì—ì„œ DUTì— ë³´ì´ê²Œ ë˜ì–´, ì ì ˆí•œ setup timeì„ ì œê³µí•©ë‹ˆë‹¤.

#### Delta Cycle ë¶„ì„ (T=30ns, reset ì´í›„ ì²« ë°ì´í„°):

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         TIME T=30ns: posedge clk occurs
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTIVE REGION                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ Both blocks are triggered and ready to execute:                             â”‚
â”‚                                                                             â”‚
â”‚   TB initial block              DUT always block                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚   @(posedge clk);               always @(posedge clk)                       â”‚
â”‚   i_valid_tb <= 1'b1; â†â”€?â”€â†’     r_valid[0] <= i_valid;                      â”‚
â”‚   i_data_tb <= 0x02;            r_power_of_2 <= i_data * i_data;            â”‚
â”‚                                                                             â”‚
â”‚ Order still UNDEFINED, but it DOESN'T MATTER with non-blocking!             â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SCENARIO A: TB executes first (same result as B!)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Step 1: TB runs                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb <= 1'b1; â†’ [SCHEDULE TO NBA]: i_valid = 1         â”‚          â”‚
â”‚   â”‚                       (i_valid is STILL 0 now!)              â”‚          â”‚
â”‚   â”‚ i_data_tb <= 0x02;  â†’ [SCHEDULE TO NBA]: i_data = 0x02       â”‚          â”‚
â”‚   â”‚                       (i_data is STILL 0 now!)               â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Step 2: DUT runs (after TB finished)                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] <= i_valid;  â†’ read i_valid (sees 1'b0 - OLD)     â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_valid[0] = 0  â”‚          â”‚
â”‚   â”‚ r_power_of_2 <= 0*0;    â†’ read i_data (sees 0x00 - OLD)      â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_power_of_2 = 0â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SCENARIO B: DUT executes first (same result as A!)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Step 1: DUT runs                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] <= i_valid;  â†’ read i_valid (sees 1'b0 - OLD)     â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_valid[0] = 0  â”‚          â”‚
â”‚   â”‚ r_power_of_2 <= 0*0;    â†’ read i_data (sees 0x00 - OLD)      â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_power_of_2 = 0â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Step 2: TB runs (after DUT finished)                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb <= 1'b1; â†’ [SCHEDULE TO NBA]: i_valid = 1         â”‚          â”‚
â”‚   â”‚ i_data_tb <= 0x02;  â†’ [SCHEDULE TO NBA]: i_data = 0x02       â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… NO RACE CONDITION!                                                       â”‚
â”‚    Both scenarios produce IDENTICAL results because:                        â”‚
â”‚    - TB only SCHEDULES updates (doesn't change values immediately)          â”‚
â”‚    - DUT always reads OLD values in Active Region                           â”‚
â”‚    - Updates happen together in NBA Region (after all reads)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NBA REGION (after Active region completes)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   All scheduled non-blocking updates execute now:                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb â† 1      (TB's scheduled update)                  â”‚          â”‚
â”‚   â”‚ i_data_tb â† 0x02    (TB's scheduled update)                  â”‚          â”‚
â”‚   â”‚ r_valid[0] â† 0      (DUT's scheduled update - read OLD)      â”‚          â”‚
â”‚   â”‚ r_power_of_2 â† 0    (DUT's scheduled update - read OLD)      â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Result: i_valid=1, i_data=0x02, but DUT captured OLD values (0, 0)        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         TIME T=40ns: next posedge clk
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTIVE REGION                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   DUT runs:                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] <= i_valid;  â†’ read i_valid (sees 1'b1 - NEW!)    â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_valid[0] = 1  â”‚          â”‚
â”‚   â”‚ r_power_of_2 <= 2*2;    â†’ read i_data (sees 0x02 - NEW!)     â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_power_of_2 = 4â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NBA REGION                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] â† 1      (DUT finally captures valid!)            â”‚          â”‚
â”‚   â”‚ r_power_of_2 â† 4    (DUT finally captures data!)             â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Result: Consistent one-cycle delay, predictable across all simulators     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Non-blockingì´ Race Conditionì„ í”¼í•˜ëŠ” ì´ìœ :

| í•­ëª© | Scenario A (TB ë¨¼ì €) | Scenario B (DUT ë¨¼ì €) |
|--------|----------------------|------------------------|
| **DUTê°€ ì½ì„ ë•Œ i_valid** | 0 (OLD) | 0 (OLD) |
| **DUTê°€ ì½ì„ ë•Œ i_data** | 0x00 (OLD) | 0x00 (OLD) |
| **NBA ì´í›„ r_valid[0]** | 0 | 0 |
| **NBA ì´í›„ r_power_of_2** | 0 | 0 |
| **ì²« ìœ íš¨ ì¶œë ¥** | T=40ns | T=40ns |

**í•µì‹¬ í†µì°°**: ë‘ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ **ë™ì¼í•œ ê²°ê³¼**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Non-blocking assignmentëŠ” READ(Active Region)ì™€ WRITE(NBA Region)ë¥¼ ë¶„ë¦¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤!

### ë¹„êµ: Case 1A vs Case 1B

| í•­ëª© | Case 1A (Blocking) | Case 1B (Non-blocking) |
|--------|-------------------|----------------------|
| **í• ë‹¹ íƒ€ì…** | `i_valid_tb = 1'b1` | `i_valid_tb <= 1'b1` |
| **ì‹¤í–‰ Region** | Active (ì¦‰ì‹œ) | Active (RHS í‰ê°€) + NBA (ì—…ë°ì´íŠ¸) |
| **Race Condition** | ìˆìŒ | ì—†ìŒ |
| **ë™ì‘** | Simulator ì˜ì¡´ì  | ëª…í™•íˆ ì •ì˜ë¨ |
| **ì²« ìœ íš¨ Capture** | T=10ns ë˜ëŠ” T=20ns (ì˜ˆì¸¡ ë¶ˆê°€) | T=20ns (ì˜ˆì¸¡ ê°€ëŠ¥) |
| **ì´ì‹ì„±** | ë‚®ìŒ (simulatorë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ) | ë†’ìŒ (ëª¨ë“  simulatorì—ì„œ ì¼ê´€ë¨) |
| **Setup Time** | ìœ„ë°˜ ê°€ëŠ¥ (ê°™ì€ ì‚¬ì´í´ ì—…ë°ì´íŠ¸ ê°€ëŠ¥) | ë³´ì¥ë¨ (1 í´ëŸ­ ì§€ì—°) |

### ì‹ í˜¸ ê²½ë¡œ ë¶„ì„

Case 1Aì—ì„œëŠ” `i_valid`ì™€ `i_data` ê²½ë¡œ ëª¨ë‘ race conditionì˜ ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤:

#### i_valid ê²½ë¡œ (ì§ì ‘ ì—°ê²°):
```verilog
// DUT
always @(posedge clk) begin
    r_valid[0] <= i_valid;  // Direct register path
end
```
- **Case 1A**: Waveformì—ì„œ race conditionì´ ëª…í™•íˆ ë³´ì„ (íƒ€ì´ë°ì´ ë‹¤ì–‘í•¨)
- **Case 1B**: ì¼ê´€ëœ 1 í´ëŸ­ ì§€ì—°

#### i_data ê²½ë¡œ (ì¡°í•© ë…¼ë¦¬ë¥¼ í†µê³¼):
```verilog
// DUT
assign power_of_2 = i_data * i_data;  // Combinational

always @(posedge clk) begin
    r_power_of_2 <= power_of_2;  // Register combinational result
end
```
- **Case 1A**: Race conditionì´ ì¡´ì¬í•˜ì§€ë§Œ waveformì—ì„œ ëœ ë³´ì¼ ìˆ˜ ìˆìŒ
  - ì¡°í•© ë…¼ë¦¬ (`power_of_2`)ëŠ” Active Regionì—ì„œ í‰ê°€ë¨
  - i_validì™€ ë™ì¼í•œ race conditionì´ì§€ë§Œ í‘œí˜„ ë°©ì‹ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
  - Simulator ì˜ì¡´ì  ë™ì‘
- **Case 1B**: ì¼ê´€ëœ ë™ì‘
  - ì¡°í•© ë…¼ë¦¬ê°€ ì´ì „ `i_data` ê°’ìœ¼ë¡œ í‰ê°€ë¨
  - ë‹¤ìŒ í´ëŸ­ ì—£ì§€ì—ì„œ ë ˆì§€ìŠ¤í„°ë¡œ ì—…ë°ì´íŠ¸ê°€ ì „íŒŒë¨

**ì¤‘ìš” ì‚¬í•­**: ì¡°í•© ë…¼ë¦¬ì˜ ì¡´ì¬ê°€ blocking assignmentì˜ race conditionì„ **ì œê±°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ì§ì ‘ ì—°ê²°ê³¼ ì¡°í•© ë…¼ë¦¬ ê²½ë¡œ ëª¨ë‘ ë™ì¼í•œ Active Region ì‹¤í–‰ ìˆœì„œ ë¶ˆí™•ì‹¤ì„±ì„ ê²ªìŠµë‹ˆë‹¤. RaceëŠ” **ì–´ë–¤ ê°’**ì´ ì²˜ë¦¬ë˜ëŠ”ì§€ì— ì˜í–¥ì„ ë¯¸ì¹˜ë©°, ë ˆì§€ìŠ¤í„° ì—…ë°ì´íŠ¸ íƒ€ì´ë°ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### ê¶Œì¥ ì‚¬í•­

1. **Testbenchì—ì„œ í•­ìƒ non-blocking assignment (`<=`) ì‚¬ìš©**: í´ëŸ­ ê¸°ë°˜ always ë¸”ë¡ì´ë‚˜ `@(posedge clk)` ì´í›„ì— í´ëŸ­ ê¸°ë°˜ DUT ì…ë ¥ì„ êµ¬ë™í•  ë•Œ.

2. **Blocking assignment (`=`)ëŠ” ì•ˆì „í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©**: ì´ˆê¸°í™”ë¥¼ ìœ„í•œ initial ë¸”ë¡ì´ë‚˜ DUT í´ëŸ­ ì—£ì§€ì™€ í™•ì‹¤íˆ ë¶„ë¦¬ëœ ê²½ìš°.

3. **Blocking assignmentë¥¼ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ simulatorì—ì„œ í…ŒìŠ¤íŠ¸**: ë™ì‘ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ.

4. **Delta cycle region ì´í•´í•˜ê¸°**:
   - Active Region: Blocking assignment ì‹¤í–‰, non-blocking RHS í‰ê°€
   - NBA Region: Non-blocking assignment ì—…ë°ì´íŠ¸
   - ì ì ˆí•œ ë¶„ë¦¬ê°€ race conditionì„ ë°©ì§€í•¨

---

## Case 2: @(posedge clk) ì´ì „ì— í• ë‹¹

### í…ŒìŠ¤íŠ¸ ì„¤ëª…

Case 2ëŠ” ë‹¤ë¥¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ íƒêµ¬í•©ë‹ˆë‹¤: **posedge clkê°€ ì•„ë‹Œ ì‹œì ì— ê°’ì„ í• ë‹¹**í•˜ê³ , ë‹¤ìŒ posedgeë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” DUTê°€ í™œì„±í™”ë˜ì§€ ì•Šì€ ì‹œì ì— í• ë‹¹ì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— Case 1ê³¼ ê·¼ë³¸ì ìœ¼ë¡œ ë‹¤ë¦…ë‹ˆë‹¤.

Case 2Aì™€ Case 2B ëª¨ë‘ **negedge clk ì´í›„** (í´ëŸ­ ì£¼ê¸°ì˜ ì¤‘ê°„)ì— ì…ë ¥ ì‹ í˜¸ë¥¼ êµ¬ë™í•˜ê³ , posedge clkë¥¼ ê¸°ë‹¤ë¦½ë‹ˆë‹¤:

```verilog
   //case2a
    for (i = 0; i < 5; i = i + 1) begin
        @(negedge clk);
        i_valid_tb = 1'b1;
        i_data_tb = test_values[i];
        @(posedge clk);
    end
```

```verilog
   //case2b
    for (i = 0; i < 5; i = i + 1) begin
        @(negedge clk);
        i_valid_tb <= 1'b1;
        i_data_tb <= test_values[i];
        @(posedge clk);
    end
```

**ì™œ ì´ê²ƒì´ ì¤‘ìš”í•œê°€**: í• ë‹¹ì´ ì •í™•íˆ posedge clkì—ì„œ ë°œìƒí•˜ë©´ (Case 1ì²˜ëŸ¼), blocking assignmentë¡œ race conditionì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ DUTê°€ íŠ¸ë¦¬ê±°ë˜ì§€ ì•ŠëŠ” í´ëŸ­ ì—£ì§€ **ì‚¬ì´**ì—ì„œ í• ë‹¹í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?

### Case 2A: í´ëŸ­ ì—£ì§€ ì‚¬ì´ì—ì„œ Blocking Assignment (Race ì—†ìŒ!)

![Case 2A Waveform](/assets/images/2026-01-24-rtl-simulator2/case2a_waveform.png)

#### í•µì‹¬ ê´€ì°° ì‚¬í•­:

1. **Race Condition ì—†ìŒ**: Case 1Aì™€ ë‹¬ë¦¬, ì—¬ê¸°ì—ëŠ” race conditionì´ ì—†ìŠµë‹ˆë‹¤! Blocking assignmentê°€ DUTì˜ `always @(posedge clk)` ë¸”ë¡ì´ í™œì„±í™”ë˜ì§€ ì•Šì€ negedge ì‹œì ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

2. **ì‹œê°„ ë¶„ë¦¬**: negedge (ì˜ˆ: T=35ns)ì—ì„œëŠ” TBë§Œ í™œì„±í™”ë©ë‹ˆë‹¤. DUTëŠ” ë‹¤ìŒ posedge (T=40ns)ê¹Œì§€ íŠ¸ë¦¬ê±°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

3. **ì•ˆì •ëœ ì…ë ¥**: posedgeê°€ ë„ì°©í•  ë•Œì¯¤ì´ë©´ ì…ë ¥ ê°’ì´ ì´ë¯¸ ì•ˆì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤ (ì¢‹ì€ setup time).

#### Delta Cycle ë¶„ì„ (T=40ns, posedge clk):

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TIME T=35ns: negedge clk occurs (BEFORE posedge)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTIVE REGION                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Only TB is active (DUT triggers on posedge, not negedge):                 â”‚
â”‚                                                                             â”‚
â”‚   TB initial block              DUT always block                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚   @(negedge clk);               always @(posedge clk)  â† NOT triggered!     â”‚
â”‚   i_valid_tb = 1'b1;            (sleeping, waiting for posedge)             â”‚
â”‚   i_data_tb = 0x03;                                                         â”‚
â”‚                                                                             â”‚
â”‚   âœ… NO RACE! DUT is not executing at negedge time!                         â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TB executes alone:                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb = 1'b1;  â†’ i_valid changes to 1 IMMEDIATELY       â”‚          â”‚
â”‚   â”‚ i_data_tb = 0x03;   â†’ i_data changes to 3 IMMEDIATELY        â”‚          â”‚
â”‚   â”‚ @(posedge clk);     â†’ TB now waits for next rising edge      â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Result: Inputs are now stable, waiting for posedge                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TIME T=40ns: posedge clk occurs (DUT triggers)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTIVE REGION                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   DUT triggers, TB is waiting on @(posedge clk):                            â”‚
â”‚                                                                             â”‚
â”‚   TB initial block              DUT always block                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚   (waiting on @posedge)         always @(posedge clk)  â† TRIGGERED!         â”‚
â”‚                                 r_valid[0] <= i_valid;                      â”‚
â”‚                                 r_power_of_2 <= i_data * i_data;            â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DUT executes:                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] <= i_valid;  â†’ read i_valid (sees 1'b1 - stable!) â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_valid[0] = 1  â”‚          â”‚
â”‚   â”‚ r_power_of_2 <= 3*3;    â†’ read i_data (sees 0x03 - stable!)  â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_power_of_2 = 9â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   TB @(posedge clk) also completes, loop continues                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NBA REGION                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] â† 1      (DUT captured stable i_valid)            â”‚          â”‚
â”‚   â”‚ r_power_of_2 â† 9    (DUT captured stable i_data = 3)         â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Result: DUT captures CURRENT iteration's data (deterministic!)            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í•µì‹¬ í†µì°° - Raceê°€ ì—†ëŠ” ì´ìœ :

| í•­ëª© | Case 2A (í´ëŸ­ ì—£ì§€ ì‚¬ì´) |
|--------|-------------------------|
| **TB í• ë‹¹ ì‹œì ** | T=35ns (negedge) |
| **DUT ì½ê¸° ì‹œì ** | T=40ns (posedge) |
| **ê²¹ì¹¨?** | ì—†ìŒ - ì„œë¡œ ë‹¤ë¥¸ ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„! |
| **Race Condition?** | ì—†ìŒ |
| **DUT ì½ì„ ë•Œ i_data** | 0x03 (í˜„ì¬, ì•ˆì •ë¨) |
| **NBA ì´í›„ r_power_of_2** | 9 (3Â²) |

---

### Case 2B: í´ëŸ­ ì—£ì§€ ì‚¬ì´ì—ì„œ Non-blocking Assignment (ì—­ì‹œ Race ì—†ìŒ!)

![Case 2B Waveform](/assets/images/2026-01-24-rtl-simulator2/case2b_waveform.png)

#### í•µì‹¬ ê´€ì°° ì‚¬í•­:

1. **ì—­ì‹œ Race Condition ì—†ìŒ**: Case 2Aì²˜ëŸ¼, í• ë‹¹ì´ negedge ì‹œì ì— ë°œìƒí•˜ê¸° ë•Œë¬¸ì— raceê°€ ì—†ìŠµë‹ˆë‹¤.

2. **ë™ì¼í•œ ê¸°ëŠ¥ì  ê²°ê³¼**: í• ë‹¹ì´ í´ëŸ­ ì—£ì§€ ì‚¬ì´(posedgeê°€ ì•„ë‹Œ)ì—ì„œ ë°œìƒí•˜ê¸° ë•Œë¬¸ì—, NBA ì—…ë°ì´íŠ¸ê°€ ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„ì´ posedgeë¡œ ì§„í–‰ë˜ê¸° ì „ì— ì™„ë£Œë©ë‹ˆë‹¤.

3. **Case 2Aì™€ ë™ì¼**: ì´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” blockingê³¼ non-blockingì´ **ë™ì¼í•œ ê²°ê³¼**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤!

#### Delta Cycle ë¶„ì„ (T=40ns, posedge clk):

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TIME T=35ns: negedge clk occurs (BEFORE posedge)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTIVE REGION                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Only TB is active:                                                        â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb <= 1'b1; â†’ [SCHEDULE TO NBA]: i_valid = 1         â”‚          â”‚
â”‚   â”‚ i_data_tb <= 0x03;  â†’ [SCHEDULE TO NBA]: i_data = 0x03       â”‚          â”‚
â”‚   â”‚ @(posedge clk);     â†’ TB now waits for next rising edge      â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   DUT is NOT active (only triggers on posedge clk)                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NBA REGION (at T=35ns, before simulation time advances)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ i_valid_tb â† 1      (update happens NOW, at negedge time)    â”‚          â”‚
â”‚   â”‚ i_data_tb â† 0x03    (update happens NOW, at negedge time)    â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   âœ… NBA completes BEFORE simulation advances to posedge!                   â”‚
â”‚   Inputs are now stable, same as Case 2A.                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TIME T=40ns: posedge clk occurs (DUT triggers)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTIVE REGION                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   DUT executes:                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] <= i_valid;  â†’ read i_valid (sees 1'b1 - stable!) â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_valid[0] = 1  â”‚          â”‚
â”‚   â”‚ r_power_of_2 <= 3*3;    â†’ read i_data (sees 0x03 - stable!)  â”‚          â”‚
â”‚   â”‚                         â†’ [SCHEDULE TO NBA]: r_power_of_2 = 9â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NBA REGION                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ r_valid[0] â† 1      (DUT captured stable i_valid)            â”‚          â”‚
â”‚   â”‚ r_power_of_2 â† 9    (DUT captured stable i_data = 3)         â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   Result: SAME as Case 2A! DUT captures current iteration's data.           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë‘ Caseê°€ ë™ì¼í•œ ê²°ê³¼ë¥¼ ìƒì„±í•˜ëŠ” ì´ìœ :

| í•­ëª© | Case 2A (Blocking) | Case 2B (Non-blocking) |
|--------|-------------------|------------------------|
| **TB í• ë‹¹ ì‹œì ** | T=35ns (ì¦‰ì‹œ) | T=35ns (NBA ì™„ë£Œ) |
| **posedge ì‹œì ì— ì…ë ¥ ì•ˆì •?** | YES | YES |
| **DUT ì½ì„ ë•Œ i_data** | 0x03 (í˜„ì¬) | 0x03 (í˜„ì¬) |
| **NBA ì´í›„ r_power_of_2** | 9 (3Â²) | 9 (3Â²) |
| **Race Condition?** | ì—†ìŒ | ì—†ìŒ |

---

### ë¹„êµ: Case 2A vs Case 2B

| í•­ëª© | Case 2A (Blocking) | Case 2B (Non-blocking) |
|--------|-------------------|----------------------|
| **í• ë‹¹ ìœ„ì¹˜** | `@(negedge clk)` ì´í›„ | `@(negedge clk)` ì´í›„ |
| **í• ë‹¹ ì‹œê°„** | T=35ns (negedge) | T=35ns (negedge) |
| **DUT ì½ê¸° ì‹œê°„** | T=40ns (posedge) | T=40ns (posedge) |
| **Race Condition** | ì—†ìŒ | ì—†ìŒ |
| **ê²°ê³¼** | í˜„ì¬ ê°’ ìº¡ì²˜ | í˜„ì¬ ê°’ ìº¡ì²˜ |
| **ë™ì‘** | ê²°ì •ì  | ê²°ì •ì  |

### í•µì‹¬ êµí›ˆ: Case 2 vs Case 1

| í•­ëª© | Case 1 (posedgeì—ì„œ) | Case 2 (í´ëŸ­ ì—£ì§€ ì‚¬ì´) |
|--------|---------------------|------------------------|
| **í• ë‹¹ íƒ€ì´ë°** | DUT íŠ¸ë¦¬ê±°ì™€ ê°™ì€ ì‹œê°„ | DUT íŠ¸ë¦¬ê±°ì™€ ë‹¤ë¥¸ ì‹œê°„ |
| **Blocking race?** | ìˆìŒ (1Aì—ì„œ race) | ì—†ìŒ (2AëŠ” ì•ˆì „) |
| **Non-blocking race?** | ì—†ìŒ (1BëŠ” ì•ˆì „) | ì—†ìŒ (2BëŠ” ì•ˆì „) |
| **blocking/non-blocking ì°¨ì´?** | ìˆìŒ - ë§¤ìš° ì¤‘ìš”! | ì—†ìŒ - ë™ì¼í•œ ê²°ê³¼! |

**í•µì‹¬ í†µì°°**: í• ë‹¹ì´ í´ëŸ­ ì—£ì§€ **ì‚¬ì´**ì—ì„œ ë°œìƒí•˜ë©´ (posedgeê°€ ì•„ë‹Œ), blockingê³¼ non-blocking ëª¨ë‘ **ë™ì¼í•œ ê¸°ëŠ¥ì  ê²°ê³¼**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. NBA ì—…ë°ì´íŠ¸ê°€ ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„ì´ ë‹¤ìŒ ì´ë²¤íŠ¸ë¡œ ì§„í–‰ë˜ê¸° ì „ì— ì™„ë£Œë©ë‹ˆë‹¤. ì´ëŠ” DUTì˜ always ë¸”ë¡ê³¼ì˜ ìƒëŒ€ì  íƒ€ì´ë°ì´ blocking assignmentë¡œ race conditionì„ ë§Œë“œëŠ” Case 1ê³¼ ê·¼ë³¸ì ìœ¼ë¡œ ë‹¤ë¦…ë‹ˆë‹¤!

### ë³´ë„ˆìŠ¤ ê´€ì°°: T=75nsì—ì„œ Case 2Aì™€ Case 2Bì˜ ì°¨ì´

ì£¼ì˜ ê¹Šì€ ë…ìë¼ë©´ Case 2Aì™€ Case 2Bê°€ **T=75nsì—ì„œ ë‹¤ë¥¸ ë™ì‘**ì„ ë³´ì¸ë‹¤ëŠ” ê²ƒì„ ëˆˆì¹˜ì±˜ì„ ê²ƒì…ë‹ˆë‹¤. for-loop ë‚´ë¶€ì—ì„œëŠ” blockingê³¼ non-blockingì´ ë™ì¼í•˜ê²Œ ë™ì‘í–ˆëŠ”ë°, ì™œ ëì—ì„œ ì°¨ì´ê°€ ë‚˜íƒ€ë‚ ê¹Œìš”?

**Case 2A (Blocking) - T=75nsì—ì„œ race condition:**

```verilog
for (i = 0; i < 5; i = i + 1) begin
    @(negedge clk);
    i_valid_tb = 1'b1;
    i_data_tb = test_values[i];
    @(posedge clk);      // â† After last iteration of for-loop...
end

// Deassert valid - this code executes right after @(posedge clk)!
i_valid_tb = 1'b0;       // â† Blocking assign at T=75ns posedge!
i_data_tb = 32'h0;
@(posedge clk);
```

for-loopì´ ëë‚˜ë©´, deassert ì½”ë“œê°€ **`@(posedge clk)` ì§í›„ì—** ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ê²ƒì€ **Case 1Aì™€ ë™ì¼í•œ ìƒí™©**ì…ë‹ˆë‹¤! T=75nsì—ì„œ TBì˜ blocking assignmentì™€ DUTì˜ always ë¸”ë¡ì´ ë™ì‹œì— ì‹¤í–‰ë˜ì–´ race conditionì´ ë°œìƒí•©ë‹ˆë‹¤.

**Case 2B (Non-blocking) - T=75nsì—ì„œë„ race ì—†ìŒ:**

```verilog
for (i = 0; i < 5; i = i + 1) begin
    @(negedge clk);
    i_valid_tb <= 1'b1;
    i_data_tb <= test_values[i];
    @(posedge clk);      // â† After last iteration of for-loop...
end

// Deassert valid - non-blocking schedules to NBA region
i_valid_tb <= 1'b0;      // â† Scheduled to NBA at T=75ns posedge
i_data_tb <= 32'h0;
@(posedge clk);
```

Non-blocking assignmentëŠ” NBA regionì— ì˜ˆì•½ë˜ë¯€ë¡œ, DUTê°€ ë¨¼ì € Active regionì—ì„œ ì´ì „ ê°’ì„ ì½ê³ , ê·¸ í›„ì— ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. **Non-blocking assignmentì—ì„œëŠ” ì´ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

**Case 2Aë¥¼ ê³ ì¹˜ëŠ” ë°©ë²•**: Blocking assignmentë¥¼ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ë ¤ë©´, deassert ì½”ë“œë„ `@(negedge clk)` íŒ¨í„´ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤:

```verilog
// Fixed Case 2A - deassert at negedge to avoid race
for (i = 0; i < 5; i = i + 1) begin
    @(negedge clk);
    i_valid_tb = 1'b1;
    i_data_tb = test_values[i];
    @(posedge clk);
end

@(negedge clk);          // â† Add negedge wait before deassert!
i_valid_tb = 1'b0;       // Now executes at negedge, not posedge
i_data_tb = 32'h0;
@(posedge clk);
```

**êµí›ˆ**: for-loop ë‚´ë¶€ì—ì„œ `@(negedge clk)`ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„, **for-loop ì™¸ë¶€ì˜ ì½”ë“œ**ëŠ” ì—¬ì „íˆ posedge ì‹œì ì— ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Blocking assignmentë¡œ race conditionì„ í”¼í•˜ë ¤ë©´, deassertë¥¼ í¬í•¨í•œ **ëª¨ë“ ** í• ë‹¹ì´ negedgeì—ì„œ ë°œìƒí•˜ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ non-blocking assignmentê°€ ê°€ì¥ ê°„ë‹¨í•˜ê³  ì•ˆì „í•œ ì ‘ê·¼ë²•ìœ¼ë¡œ, ì´ëŸ¬í•œ ì˜ˆì™¸ ìƒí™©ì— ì˜í–¥ì„ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.

---
## Case 3: Delay íš¨ê³¼ â€“ Inactive Region vs Time Delays

### í…ŒìŠ¤íŠ¸ ì„¤ëª…

Case 3ëŠ” blocking assignmentë¥¼ ì‚¬ìš©í•  ë•Œ race conditionì„ í”¼í•˜ëŠ” ëŒ€ì•ˆì  ë°©ë²•ì„ íƒêµ¬í•©ë‹ˆë‹¤:
**zero delays (`#0`)**ì™€ **real time delays (`#1`, `#2` ë“±)**.
ì´ caseëŠ” **delta-cycle delays**ì™€ **time-advancing delays**ì˜ ê·¼ë³¸ì ì¸ ì°¨ì´ë¥¼ ê°•ì¡°í•©ë‹ˆë‹¤.

### ì¤‘ìš”í•œ êµ¬ë¶„

- **`#0` (Zero Delay)**
  **ê°™ì€ ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„** ë‚´ì—ì„œ **Inactive Region**ìœ¼ë¡œ ì‹¤í–‰ì„ ì´ë™
  (ê°™ì€ íƒ€ì„ìŠ¤íƒ¬í”„, ë‹¤ë¥¸ delta cycle).

- **`#n` (n > 0ì¸ ê²½ìš°, Non-zero Delay)**
  ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„ì„ **T + n**ìœ¼ë¡œ ì§„í–‰í•˜ì—¬, **ë‹¤ë¥¸ ì‹œê°„ ìŠ¬ë¡¯**ì—ì„œ ì‹¤í–‰
  (Inactive Regionì´ ì•„ë‹˜).

```verilog
// Case 3A: Blocking without delay
@(posedge clk);
signal = value;      // Active Region, same time as DUT - RACE!

// Case 3B: Blocking with #0 delay (Inactive Region)
@(posedge clk);
#0;                  // Move to Inactive Region (same simulation time)
signal = value;      // Deterministic ordering, but fragile timing dependency

// Case 3C: Blocking with #1 delay (Different Simulation Time)
@(posedge clk);
#1;                  // Advance simulation time (T + 1ns)
signal = value;      // Executes after DUT completes - SAFE
```



### Case 3A: Delay ì—†ì´ Blocking (ì§„ì •í•œ Race Condition)

#### í•µì‹¬ ê´€ì°° ì‚¬í•­

![alt text](/assets/images/2026-01-24-rtl-simulator2/case3a_waveform.png)

Case 1Aì™€ ë™ì¼í•©ë‹ˆë‹¤. @(posedge clk) ì§í›„ì˜ blocking assignmentëŠ” race conditionì„ ìœ ë°œí•©ë‹ˆë‹¤.

**Active Region ì¶©ëŒ**: Testbenchì™€ DUT ëª¨ë‘ ê°™ì€ ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„ì— Active Regionì—ì„œ ì‹¤í–‰ë˜ë©°, ì‹¤í–‰ ìˆœì„œê°€ ì •ì˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```
Delta Cycle Timeline (T = 10ns)
T = 10ns (posedge clk)
â”œâ”€ Active Region
â”‚  â”œâ”€ TB : i_valid_tb = 1 (blocking, immediate)   â† RACE
â”‚  â””â”€ DUT: samples i_valid (execution order undefined)
â”œâ”€ NBA Region
â”‚  â””â”€ DUT: r_valid[0] <= ? (depends on race outcome)
â””â”€ Result: Simulator-dependent behavior
```

### Case 3B: #0 Delayë¥¼ ì‚¬ìš©í•œ Blocking (Inactive Region â€“ ë¶€ë¶„ì  Race íšŒí”¼)

#### í•µì‹¬ ê´€ì°° ì‚¬í•­

![alt text](/assets/images/2026-01-24-rtl-simulator2/case3b_waveform.png)

**1. DUTì™€ì˜ Active-Region Raceê°€ ì œê±°ë¨**

`#0` delayëŠ” testbench í• ë‹¹ì„ Active Region **ì´í›„ì—** ì‹¤í–‰ë˜ëŠ” Inactive Regionìœ¼ë¡œ ê°•ì œí•©ë‹ˆë‹¤. DUTì˜ `always_ff`ê°€ Active Regionì—ì„œ ì…ë ¥ì„ ìƒ˜í”Œë§í•˜ë¯€ë¡œ, ì¼ê´€ë˜ê²Œ OLD ê°’ì„ ë³´ê²Œ ë©ë‹ˆë‹¤. ì´ íŠ¹ì • ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í”Œë¦½í”Œë¡­ ìƒ˜í”Œë§ì— ëŒ€í•œ "TB vs DUT" raceë¥¼ í•´ê²°í•©ë‹ˆë‹¤.

**2. ì™œ ì—¬ì „íˆ Raceê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ íŒ¨í„´ìœ¼ë¡œ ê°„ì£¼ë˜ëŠ”ê°€**

ì§ì ‘ì ì¸ "TB vs DUT" raceëŠ” ì œê±°ë˜ì—ˆì§€ë§Œ, `#0`ì€ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ ì—¬ì „íˆ ê¶Œì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤:

- **Inactive Region ë‚´ì—ì„œ ì •ì˜ë˜ì§€ ì•Šì€ ìˆœì„œ**: ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ `#0`ì„ ì‚¬ìš©í•˜ë©´, Inactive Region ë‚´ì—ì„œì˜ ì‹¤í–‰ ìˆœì„œëŠ” IEEE í‘œì¤€ì—ì„œ **ì—¬ì „íˆ ì •ì˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ testbench ë“œë¼ì´ë²„ë‚˜ ëª¨ë‹ˆí„°ê°€ ëª¨ë‘ `#0`ì„ ì‚¬ìš©í•˜ë©´, ì–´ë–¤ ìˆœì„œë¡œë“  ì‹¤í–‰ë  ìˆ˜ ìˆì–´ ìƒˆë¡œìš´ race conditionì´ ìƒê¹ë‹ˆë‹¤.

- **ì¡°í•© ë…¼ë¦¬ ë¶€ì‘ìš©**: ì‹ í˜¸ê°€ Inactive Regionì—ì„œ ë³€ê²½ë˜ë©´, í•´ë‹¹ ì‹ í˜¸ì— ë¯¼ê°í•œ ëª¨ë“  `always @(*)` ì¡°í•© ë…¼ë¦¬ ë¸”ë¡ì´ ê°™ì€ time step (delta iteration) ë‚´ì—ì„œ ì¬í‰ê°€ë  ìˆ˜ ìˆì–´, ëª¨ë‹ˆí„°ë‚˜ ì²´ì»¤ì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **ìœ ì§€ë³´ìˆ˜ì„± ì €í•˜**: `#0`ì€ "race condition íšŒí”¼"ë¼ëŠ” ì˜ë„ë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í–¥í›„ testbench ìˆ˜ì • ì‹œ ì‹¤ìˆ˜ë¡œ ìƒˆë¡œìš´ race conditionì´ ë„ì…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **ì—…ê³„ í•©ì˜**: `#0`ì€ ê²¬ê³ í•œ í•´ê²°ì±…ì´ ì•„ë‹Œ "hack" ë˜ëŠ” ì„ì‹œ ìš°íšŒì±…ìœ¼ë¡œ ë„ë¦¬ ê°„ì£¼ë©ë‹ˆë‹¤.

**3. ë‹¨ì¼ TB vs DUTì—ì„œëŠ” ê²°ì •ì ì´ì§€ë§Œ, ê·œëª¨ê°€ ì»¤ì§€ë©´ ì·¨ì•½í•¨**

í•˜ë‚˜ì˜ TB ë“œë¼ì´ë²„ì™€ í•˜ë‚˜ì˜ DUTë§Œ ìˆëŠ” ì´ ê°„ë‹¨í•œ ê²½ìš°ì—ì„œëŠ” ë™ì‘ì´ ê²°ì •ì ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ testbenchê°€ ì»¤ì§€ë©´ (ì—¬ëŸ¬ ë“œë¼ì´ë²„, ëª¨ë‹ˆí„°, ì²´ì»¤ê°€ ëª¨ë‘ `#0` ì‚¬ìš©), Inactive Regionì´ ì‹¤í–‰ ìˆœì„œê°€ ì •ì˜ë˜ì§€ ì•Šì€ í”„ë¡œì„¸ìŠ¤ë“¤ë¡œ ë³µì¡í•´ì§‘ë‹ˆë‹¤.

```
Delta Cycle Timeline (T = 10ns)
T = 10ns (posedge clk)
â”œâ”€ Active Region
â”‚  â”œâ”€ DUT: samples i_valid (sees OLD value - TB hasn't assigned yet)
â”‚  â””â”€ TB: encounters #0, schedules assignment to Inactive Region
â”œâ”€ Inactive Region
â”‚  â””â”€ TB: i_valid_tb = 1 (blocking assignment executes here)
â”‚     âš ï¸ If multiple processes use #0, their order is UNDEFINED!
â”œâ”€ NBA Region
â”‚  â””â”€ DUT: registers update (using the OLD value read in Active)
â””â”€ Result: "TB vs DUT" race resolved, but fragile pattern
```

### Case 3C: Real Time Delayë¥¼ ì‚¬ìš©í•œ Blocking (ì•ˆì „)

#### í•µì‹¬ ê´€ì°° ì‚¬í•­

![alt text](/assets/images/2026-01-24-rtl-simulator2/case3c_waveform.png)

**ë‹¤ë¥¸ ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„**: #1 delayëŠ” ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„ì„ ì§„í–‰ì‹œì¼œ, testbench ìê·¹ì„ DUT í´ëŸ­ ì—£ì§€ì™€ ì™„ì „íˆ ë¶„ë¦¬í•©ë‹ˆë‹¤.

**Delta-Cycle ìƒí˜¸ì‘ìš© ì—†ìŒ**: Testbench ì—…ë°ì´íŠ¸ê°€ DUTê°€ ì‹œê°„ Tì—ì„œ ëª¨ë“  ì²˜ë¦¬ë¥¼ ì™„ë£Œí•œ í›„ì¸ T + 1nsì—ì„œ ë°œìƒí•©ë‹ˆë‹¤.

**ì•ˆì „í•˜ì§€ë§Œ ì˜ë¯¸ì ìœ¼ë¡œ ë‹¤ë¦„**: RaceëŠ” ì—†ì§€ë§Œ, ì´ ì ‘ê·¼ë²•ì€ ë¬¼ë¦¬ì ìœ¼ë¡œ ì§€ì—°ëœ ì…ë ¥ì„ ëª¨ë¸ë§í•˜ë¯€ë¡œ, ë™ê¸°ì‹ ì„¤ê³„ ì˜ë„ì™€ ë§ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


#### #0ê³¼ #1ì´ Race Conditionì„ í”¼í•˜ëŠ” ì´ìœ  (ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ T=10ns (posedge clk)                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   #0 delay (Inactive Region) - SAME TIME, BUT ORDERED!                      â”‚
|   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ Active Region    â†’  Inactive Region  â†’  NBA Region  â†’  Monitor    â”‚     â”‚
â”‚   â”‚ (DUT reads here)    (#0 executes)      (NBA updates)              â”‚     â”‚
â”‚   â”‚      â†‘                    â†‘                                       â”‚     â”‚
â”‚   â”‚      â”‚                    â”‚                                       â”‚     â”‚
â”‚   â”‚  DUT reads OLD      TB writes NEW                                 â”‚     â”‚
â”‚   â”‚  value FIRST!       value AFTER!                                  â”‚     â”‚
â”‚   â”‚                     (deterministic)                               â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚   Region order is GUARANTEED: Active â†’ Inactive â†’ NBA â†’ Monitor             â”‚
â”‚   DUT ALWAYS reads OLD value because it runs in Active (before Inactive)    â”‚
â”‚   Result: NO ACTIVE REGION RACE!                                            |
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #1 delay - DIFFERENT SIMULATION TIME                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   T=10ns: DUT reads and updates (TB not involved yet)                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚
â”‚   T=11ns: TB writes (DUT already finished at T=10ns)                        â”‚
â”‚                                                                             â”‚
â”‚   Complete time separation = NO RACE!                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¹„êµ: Case 3A vs Case 3B vs Case 3C

| í•­ëª© | Case 3A (Delay ì—†ìŒ) | Case 3B (`#0` Delay) | Case 3C (`#1` Delay) |
|------|------------------|--------------------|--------------------|
| **í• ë‹¹ íƒ€ì…** | Blocking (`=`) | Blocking (`=`) | Blocking (`=`) |
| **Delay** | ì—†ìŒ | `#0` (zero delay) | `#1` (real time delay) |
| **ì‹¤í–‰ Region** | Active | Inactive | Active (T+1nsì—ì„œ) |
| **ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„** | T = 10ns | T = 10ns (ê°™ì€ ì‹œê°„) | T = 11ns (ì§„í–‰ëœ ì‹œê°„) |
| **TB vs DUT Race** | **ìˆìŒ** | **ì—†ìŒ** (í•´ê²°ë¨) | **ì—†ìŒ** |
| **Inactive Region Race** | í•´ë‹¹ ì—†ìŒ | **ê°€ëŠ¥ì„± ìˆìŒ** (ì—¬ëŸ¬ #0 í”„ë¡œì„¸ìŠ¤ ì‹œ) | í•´ë‹¹ ì—†ìŒ |
| **Delta-Cycle ì˜ì¡´ì„±** | í†µì œ ë¶ˆê°€ | **ìˆìŒ (ì·¨ì•½í•œ ìˆœì„œ)** | ì—†ìŒ |
| **ë™ì‘** | Simulator ì˜ì¡´ì  | ë‹¨ì¼ TB/DUTì—ì„œ ê²°ì •ì  | ê²°ì •ì  |
| **DUT ìƒ˜í”Œë§** | OLD ë˜ëŠ” NEW (race) | í•­ìƒ OLD (ì´ì „ ì‚¬ì´í´) | ì´ì „ í´ëŸ­ ì—£ì§€ì˜ ê°’ |
| **ê¶Œì¥ ì‚¬ìš©** | âŒ ì ˆëŒ€ ì•ˆë¨ | âš ï¸ ë¹„ê¶Œì¥ (ìš°íšŒì±…) | âš ï¸ ì£¼ì˜í•´ì„œ ì‚¬ìš© |

> **Case 3Bì˜ í•µì‹¬ í†µì°°:**
> - `#0` delayëŠ” ì´ íŠ¹ì • ê²½ìš°ì—ì„œ í”Œë¦½í”Œë¡­ ìƒ˜í”Œë§ì— ëŒ€í•œ "TB vs DUT" raceë¥¼ **í•´ê²°í•©ë‹ˆë‹¤**
> - TBì˜ driveê°€ Inactive Regionìœ¼ë¡œ ì§€ì—°ë˜ê¸° ë•Œë¬¸ì— DUTëŠ” í•­ìƒ OLD ê°’ì„ ìƒ˜í”Œë§í•©ë‹ˆë‹¤
> - **ê·¸ëŸ¬ë‚˜**, ì´ê²ƒì€ ì—¬ì „íˆ raceê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ ìš°íšŒì±…ìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤:
>   1. Inactive Region ë‚´ ì—¬ëŸ¬ `#0` í”„ë¡œì„¸ìŠ¤ ê°„ì˜ ì‹¤í–‰ ìˆœì„œëŠ” **ì •ì˜ë˜ì§€ ì•ŠìŒ**
>   2. íŒ¨í„´ì´ ì·¨ì•½í•˜ê³  ìì²´ ë¬¸ì„œí™”ë˜ì§€ ì•ŠìŒ
> - Case 3Cë§Œì´ testbench ìê·¹ì„ DUT í´ëŸ­ ì—£ì§€ì™€ ì‹œê°„ì ìœ¼ë¡œ ì™„ì „íˆ ë¶„ë¦¬í•©ë‹ˆë‹¤




### ê¶Œì¥ ì‚¬í•­

1. **ê¶Œì¥ í•´ê²°ì±…**: Case 1Bì™€ 2Bì—ì„œ ë³´ì—¬ì¤€ ê²ƒì²˜ëŸ¼ non-blocking assignment (`<=`) ì‚¬ìš©
   - ì„ì˜ì˜ delay ê°’ì„ ì„ íƒí•  í•„ìš” ì—†ìŒ
   - ìì²´ ë¬¸ì„œí™”ë˜ëŠ” ì˜ë„ (ìˆœì°¨ì  ë™ì‘)
   - ì—…ê³„ í‘œì¤€ ê´€í–‰

2. **Time Delays (`#1`, `#2` ë“±)**: ì‘ë™í•˜ì§€ë§Œ **í´ëŸ­ ê¸°ë°˜ DUT ì…ë ¥ êµ¬ë™ì—ëŠ” ê¶Œì¥ë˜ì§€ ì•ŠìŒ**
   - ì„ì˜ì˜ delay ê°’ ì„ íƒ í•„ìš”
   - í´ëŸ­ ì£¼ê¸°ê°€ ë³€ê²½ë˜ë©´ íƒ€ì´ë° ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
   - Non-blocking assignmentë³´ë‹¤ ì˜ë„ê°€ ë¶ˆëª…í™•
   - **ì°¸ê³ **: Time delayëŠ” ë‹¤ë¥¸ ë§¥ë½ì—ì„œëŠ” í—ˆìš©ë¨ (ì˜ˆ: ê´€ë ¨ ì—†ëŠ” ì´ë²¤íŠ¸ ê°„ ì§€ì—° ì¶”ê°€, ì „íŒŒ ì§€ì—° ëª¨ë¸ë§)

3. **Zero Delays (`#0`)**: **ë¹„ê¶Œì¥ - ìˆ¨ê²¨ì§„ ìœ„í—˜ì´ ìˆëŠ” ë¶€ë¶„ì  í•´ê²°ì±…**
   - FF ìƒ˜í”Œë§ì— ëŒ€í•œ "TB vs DUT" raceë¥¼ **í•´ê²°í•¨** (DUTëŠ” í•­ìƒ OLD ê°’ì„ ìƒ˜í”Œë§)
   - **ê·¸ëŸ¬ë‚˜**, ì—¬ì „íˆ raceê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ ìš°íšŒì±…ìœ¼ë¡œ ê°„ì£¼ë¨:
     - Inactive Region ë‚´ ì—¬ëŸ¬ `#0` í”„ë¡œì„¸ìŠ¤ ê°„ì˜ ì‹¤í–‰ ìˆœì„œê°€ **ì •ì˜ë˜ì§€ ì•ŠìŒ**
     - ì—¬ëŸ¬ TB ë“œë¼ì´ë²„/ëª¨ë‹ˆí„°ê°€ `#0`ì„ ì‚¬ìš©í•˜ë©´ ì„œë¡œ raceí•  ìˆ˜ ìˆìŒ
     - ì˜ë„ê°€ ëª…í™•í•˜ì§€ ì•Šê³  ìœ ì§€ë³´ìˆ˜ì„±ì´ ë‚®ìŒ
   - ì—…ê³„ í•©ì˜: `#0`ì€ ê²¬ê³ í•œ í•´ê²°ì±…ì´ ì•„ë‹Œ "hack"

**í•µì‹¬ êµí›ˆ**:
- `#0`ì€ **Inactive Region**ìœ¼ë¡œ ì´ë™ (ê°™ì€ ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„) â†’ "TB vs DUT" FF ìƒ˜í”Œë§ raceë¥¼ í•´ê²°í•˜ì§€ë§Œ, ì—¬ëŸ¬ `#0` í”„ë¡œì„¸ìŠ¤ ê°„ **Inactive Region race** ê°€ëŠ¥ì„± ìƒì„±
- `#n` (n > 0)ì€ ì™„ì „íˆ ë‹¤ë¥¸ **ì‹œë®¬ë ˆì´ì…˜ ì‹œê°„**ìœ¼ë¡œ ì´ë™ â†’ ëª¨ë“  raceë¥¼ ì™„ì „íˆ íšŒí”¼
- **Non-blocking assignmentê°€ ë™ê¸°ì‹ testbenchì—ì„œ í´ëŸ­ ê¸°ë°˜ DUT ì…ë ¥ì„ êµ¬ë™í•˜ê¸° ìœ„í•œ ì˜¬ë°”ë¥´ê³  ì—…ê³„ í‘œì¤€ì ì¸ í•´ê²°ì±…**

---
